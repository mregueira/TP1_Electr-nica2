Version 4
SHEET 1 880 808
WIRE -80 80 -544 80
WIRE 112 80 16 80
WIRE 160 80 112 80
WIRE 272 80 240 80
WIRE 400 80 272 80
WIRE 528 80 400 80
WIRE 624 80 528 80
WIRE 736 80 624 80
WIRE 112 112 112 80
WIRE 736 128 736 80
WIRE 272 176 272 80
WIRE 528 208 528 80
WIRE -544 224 -544 80
WIRE -416 224 -544 224
WIRE -272 224 -336 224
WIRE -64 224 -176 224
WIRE -32 224 -32 144
WIRE -32 224 -64 224
WIRE 112 224 112 192
WIRE 208 224 112 224
WIRE 736 256 736 208
WIRE 112 272 112 224
WIRE -64 320 -64 224
WIRE 48 320 -64 320
WIRE 528 352 528 288
WIRE 48 384 48 320
WIRE 272 384 272 272
WIRE 272 384 48 384
WIRE -64 400 -64 320
WIRE -544 416 -544 224
WIRE -464 416 -544 416
WIRE -368 416 -400 416
WIRE -224 416 -224 288
WIRE -224 416 -304 416
WIRE 208 448 0 448
WIRE -224 464 -224 416
WIRE 208 464 208 448
WIRE 224 464 208 464
WIRE 256 464 224 464
WIRE 528 464 528 432
WIRE 528 464 336 464
WIRE 528 496 528 464
WIRE -544 512 -544 416
WIRE -64 528 -64 496
WIRE 16 528 -64 528
WIRE 400 528 400 80
WIRE 400 528 96 528
WIRE -64 560 -64 528
WIRE -224 576 -224 544
WIRE 224 608 224 464
WIRE -544 640 -544 592
WIRE 528 640 528 576
WIRE -64 672 -64 624
WIRE 224 736 224 688
WIRE 528 768 528 720
FLAG -544 640 0
FLAG -64 672 0
FLAG 528 768 0
FLAG -224 576 0
FLAG 736 256 0
FLAG 624 80 VO
FLAG 112 352 0
FLAG 224 736 0
FLAG 208 448 x
SYMBOL npn 0 400 M0
SYMATTR InstName Q1
SYMATTR Value BC547C
SYMBOL npn 208 272 M180
SYMATTR InstName Q4
SYMATTR Value BC337-25
SYMBOL pnp -176 288 M270
SYMATTR InstName Q3
SYMATTR Value BC327-25
SYMBOL res -320 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 180
SYMBOL res 112 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 3.3k
SYMBOL res 544 304 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1882
SYMBOL res 544 448 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4A
SYMATTR Value {10k*q}
SYMBOL res 544 736 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 6k
SYMBOL res 256 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RA
SYMATTR Value 1
SYMBOL res -240 448 R0
SYMATTR InstName R6
SYMATTR Value 2.7k
SYMBOL diode -368 432 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -464 432 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL voltage -544 496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName VR
SYMATTR Value 15
SYMBOL npn -80 144 R270
SYMATTR InstName Q2
SYMATTR Value tip112
SYMATTR Prefix X
SYMBOL zener -48 624 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value DI_BZT52C2V7
SYMATTR Prefix X
SYMBOL res 512 480 R0
SYMATTR InstName R4B
SYMATTR Value {10k*(1-q)}
SYMBOL res 96 96 R0
SYMATTR InstName RB
SYMATTR Value 1k
SYMBOL res 96 256 R0
SYMATTR InstName RC
SYMATTR Value 11k
SYMBOL res 720 112 R0
SYMATTR InstName RL
SYMATTR Value 100k
SYMBOL voltage 240 464 R270
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vi
SYMATTR Value AC {u(-prb)}
SYMBOL current 224 688 R180
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value AC {u(prb)}
TEXT -824 8 Left 2 !.inc ..\\Libreria\\TIP112.lib
TEXT -816 -24 Left 2 !.inc ..\\Libreria\\1N5223.lib
TEXT -824 40 Left 2 !.param q = 0.999
TEXT -824 80 Left 2 ;.tran 0 2 1 0.1
TEXT -840 120 Left 2 !.ac dec 100 100 100Meg
TEXT -1152 160 Left 2 !.step param prb list -1 1 ; set prb=0 to turn off probe
TEXT -824 224 Left 2 ;.param prb=0
TEXT -480 -40 Left 2 ;-1/(1-1/(2*(I(Vi)@1*V(x)@2-V(x)@1*I(Vi)@2)+V(x)@1+I(Vi)@2))
